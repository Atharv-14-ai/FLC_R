{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container-fluid py-4">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="page-title">Dashboard</h2>
        <span class="role-badge">{{ current_user.role | upper }}</span>
    </div>

    <!-- Summary Cards -->
    <div class="row g-4">
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-icon">
                    üì¶
                </div>
                <div class="stat-info">
                    <h5>Total Dispatches</h5>
                    <h2>{{ total_dispatches }}</h2>
                </div>
            </div>
        </div>

        {% if current_user.role == "A" or current_user.role == "B" %}
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-icon">
                    ‚úÖ
                </div>
                <div class="stat-info">
                    <h5>Confirmed Receipts</h5>
                    <h2>{{ confirmed_receipts }}</h2>
                </div>
            </div>
        </div>
        {% endif %}

        {% if current_user.role == "A" %}
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-icon">
                    üîÅ
                </div>
                <div class="stat-info">
                    <h5>Pending Returns</h5>
                    <h2>{{ pending_returns }}</h2>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Quick Actions -->
    <div class="mt-5">
        <h4 class="section-title">Quick Actions</h4>
        <div class="d-flex gap-3 flex-wrap mt-3">

            {% if current_user.role == "A" or current_user.role == "B" %}
            <a href="{{ url_for('create_dispatch') }}" class="btn action-btn">‚ûï Create Dispatch</a>
            <a href="{{ url_for('receive_dispatch') }}" class="btn action-btn">üì• Receive Dispatch</a>
            {% endif %}

            {% if current_user.role == "A" %}
            <a href="{{ url_for('return_entry') }}" class="btn action-btn">üîô Return Entry</a>
            {% endif %}

            <a href="{{ url_for('reports') }}" class="btn action-btn">üìä View Reports</a>
        </div>
    </div>

</div>

<style>
    .page-title {
        font-weight: 700;
        color: #1e3557;
    }

    .role-badge {
        background: #004aad;
        color: #fff;
        padding: 6px 14px;
        border-radius: 6px;
        font-size: 14px;
        letter-spacing: 0.5px;
    }

    .stat-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        align-items: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        transition: transform .2s;
        border-left: 6px solid #004aad;
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-icon {
        font-size: 40px;
        margin-right: 16px;
    }

    .stat-info h2 {
        font-weight: bold;
        margin: 0;
        color: #004aad;
    }

    .section-title {
        color: #1e3557;
        font-weight: 600;
        margin-bottom: 10px;
    }

    .action-btn {
        background: #004aad;
        color: #fff;
        font-weight: 500;
        padding: 10px 20px;
        border-radius: 8px;
        transition: 0.2s;
    }

    .action-btn:hover {
        background: #062c6e;
        transform: translateY(-3px);
        color: #fff;
    }
</style>

{% endblock %}
