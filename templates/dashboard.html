{% extends "base.html" %} 
{% block content %}

<div class="container-fluid py-4">
  <!-- Header Section -->
  <div class="row mb-5" data-aos="fade-down">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h2 text-dark fw-bold mb-2">Dashboard</h1>
          <p class="text-muted mb-0">
            Welcome back, <strong>{{ session['username'] }}</strong> â€¢ 
            {{ "Manage your supply chain operations" if session['role'] == 'Supplier' else "Handle dispatches and track inventory" }}
          </p>
        </div>
        <div class="text-end">
          <span class="badge bg-primary fs-6">{{ session['role'] }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <!-- Quick Actions Sidebar -->
    <div class="col-lg-3">
      <div class="card shadow-sm border-0" data-aos="fade-right">
        <div class="card-header bg-transparent border-0 pb-0">
          <h5 class="card-title mb-0 text-dark">
            <i class="bi bi-lightning-charge-fill text-warning me-2"></i>
            Quick Actions
          </h5>
        </div>
        <div class="card-body">
          {% if session['role'] == 'Supplier' %}
          <a href="{{ url_for('dispatch_create') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-truck me-2"></i>
            Create Dispatch
          </a>
          <a href="{{ url_for('reports') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-graph-up me-2"></i>
            Analytics & Reports
          </a>
          <a href="{{ url_for('components') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-cpu me-2"></i>
            Manage Components
          </a>
          <a href="{{ url_for('manage_users') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-people me-2"></i>
            Manage Users
          </a>
          <a href="{{ url_for('manage_end_users') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-person-badge me-2"></i>
            Manage End Users
          </a>
          <a href="{{ url_for('returns') }}" class="btn btn-outline-primary w-100 text-start">
            <i class="bi bi-arrow-repeat me-2"></i>
            Returns Management
          </a>
          {% elif session['role'] == 'Intermediate' %}
          <a href="{{ url_for('dispatch_create') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-truck me-2"></i>
            Create Dispatch
          </a>
          <a href="{{ url_for('dispatch_receive') }}" class="btn btn-outline-primary w-100 mb-3 text-start">
            <i class="bi bi-box-arrow-in-down me-2"></i>
            Receive Dispatch
          </a>
          <a href="{{ url_for('reports') }}" class="btn btn-outline-primary w-100 text-start">
            <i class="bi bi-graph-up me-2"></i>
            View Reports
          </a>
          {% endif %}
        </div>
      </div>

      <!-- System Status Card -->
      <div class="card shadow-sm border-0 mt-4" data-aos="fade-right" data-aos-delay="200">
        <div class="card-header bg-transparent border-0">
          <h6 class="card-title mb-0 text-dark">
            <i class="bi bi-speedometer2 text-info me-2"></i>
            System Status
          </h6>
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="text-muted">Role</span>
            <span class="fw-semibold text-dark">{{ session['role'] }}</span>
          </div>
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="text-muted">Status</span>
            <span class="badge bg-success">Online</span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span class="text-muted">Last Login</span>
            <small class="text-muted">Just now</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="col-lg-9">
      <!-- Statistics Cards -->
      {% if stats %}
      <div class="row g-4 mb-5">
        <div class="col-xl-3 col-md-6" data-aos="fade-up" data-aos-delay="100">
          <div class="card stat-card border-0">
            <div class="card-body text-center">
              <div class="text-primary mb-3">
                <i class="bi bi-truck fs-1"></i>
              </div>
              <h3 class="card-title text-dark mb-1">{{ stats.total_dispatches }}</h3>
              <p class="card-text text-muted mb-0">Total Dispatches</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6" data-aos="fade-up" data-aos-delay="200">
          <div class="card stat-card border-0">
            <div class="card-body text-center">
              <div class="text-warning mb-3">
                <i class="bi bi-hourglass-split fs-1"></i>
              </div>
              <h3 class="card-title text-dark mb-1">{{ stats.pending }}</h3>
              <p class="card-text text-muted mb-0">Pending</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6" data-aos="fade-up" data-aos-delay="300">
          <div class="card stat-card border-0">
            <div class="card-body text-center">
              <div class="text-success mb-3">
                <i class="bi bi-check-circle fs-1"></i>
              </div>
              <h3 class="card-title text-dark mb-1">{{ stats.received }}</h3>
              <p class="card-text text-muted mb-0">Received</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6" data-aos="fade-up" data-aos-delay="400">
          <div class="card stat-card border-0">
            <div class="card-body text-center">
              <div class="text-info mb-3">
                <i class="bi bi-arrow-repeat fs-1"></i>
              </div>
              <h3 class="card-title text-dark mb-1">{{ stats.returned }}</h3>
              <p class="card-text text-muted mb-0">Returned</p>
            </div>
          </div>
        </div>
      </div>
      {% endif %}

      <!-- Recent Activity Section -->
      <div class="card shadow-sm border-0" data-aos="fade-up" data-aos-delay="500">
        <div class="card-header bg-transparent border-0">
          <h5 class="card-title mb-0 text-dark">
            <i class="bi bi-activity text-success me-2"></i>
            Recent Activity
          </h5>
        </div>
        <div class="card-body">
          <div class="text-center py-5">
            <i class="bi bi-inbox display-4 text-muted mb-3"></i>
            <h5 class="text-muted mb-2">No Recent Activity</h5>
            <p class="text-muted mb-0">Your recent activities will appear here once you start using the system.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.stat-card {
  transition: all 0.3s ease;
  border-left: 4px solid #2563eb !important;
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.btn-outline-primary {
  transition: all 0.3s ease;
}

.btn-outline-primary:hover {
  transform: translateX(5px);
}
</style>

{% endblock %}